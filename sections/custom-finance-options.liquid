{%- style -%}
  .finance-banner {
    display: flex;
    background-color: {{ section.settings.right_bg_color }};
    margin: 20px 0;
  }

  .finance-banner__left {
    background-color: {{ section.settings.arrow_background_color }};
    position: relative;
    /* This creates the arrow shape by clipping the container */
    clip-path: polygon(0 0, calc(100% - 25px) 0, 100% 50%, calc(100% - 25px) 100%, 0 100%);
    line-height: 0; /* Removes extra space around the image */
    flex-shrink: 0;
    width: 35%; /* Adjust width of the left image block */
  }

  .finance-banner__left img,
  .finance-banner__left .placeholder-svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .finance-banner__right {
    padding: 20px 30px;
    display: flex;
    align-items: center;
    flex-grow: 1;
  }
  
  .finance-banner__text {
    margin: 0;
    font-size: 16px;
  }

  @media screen and (max-width: 768px) {
    .finance-banner {
      flex-direction: column;
    }
    .finance-banner__left {
      width: 100%;
      clip-path: none; /* Mobile view often looks better without the arrow shape */
    }
  }
{%- endstyle -%}

<div class="page-width">
  <div class="finance-banner">
    <div class="finance-banner__left">
      {%- if section.settings.left_image != blank -%}
        <img
          src="{{ section.settings.left_image | image_url: width: 400 }}"
          alt="{{ section.settings.left_image.alt | default: 'Finance promotion' }}"
          width="400"
          height="{{ 400 | divided_by: section.settings.left_image.aspect_ratio | round }}"
          loading="lazy"
        >
      {%- else -%}
        {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
      {%- endif -%}
    </div>
    <div class="finance-banner__right">
      {%- if section.settings.text != blank -%}
        <div class="finance-banner__text">{{ section.settings.text }}</div>
      {%- endif -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Finance Banner",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Left Image Block"
    },
    {
      "type": "image_picker",
      "id": "left_image",
      "label": "Left Image (with arrow shape)"
    },
    {
      "type": "color",
      "id": "arrow_background_color",
      "label": "Arrow Background / Fallback Color",
      "info": "This color appears behind the image or if no image is selected.",
      "default": "#f0eaf8"
    },
    {
      "type": "header",
      "content": "Right Content Block"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text",
      "default": "<p>We offer flexible ways to pay for all our products.</p>"
    },
    {
      "type": "color",
      "id": "right_bg_color",
      "label": "Right Box Background",
      "default": "#f5f5f5"
    }
  ],
  "presets": [
    {
      "name": "Finance Banner"
    }
  ]
}
{% endschema %}